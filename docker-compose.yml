notifier:
  build: kino-notifier
  volumes:
    - ./kino-notifier:/app
  links:
    - stats:stats.local
    - rabbitmq:rabbitmq.local
    - ssh:ssh.local
  volumes_from:
    - ssh
  environment:
    - RABBITMQ_HOST=rabbitmq.local
    - STATSD_HOST=stats.local
ssh:
  build: kino-ssh-server
  ports: 
    - "3500:22"
  volumes:
    - /home
rabbitmq:
  image: rabbitmq:3.5.7
  ports:
    - "5672"
stats:
  image: kamon/grafana_graphite:latest
  ports:
    - "8215/udp"
    - "4000:80"
    - "4001:81"
postgres:
  image: postgres:9.4.5
  ports:
    - "5432"
webapp:
  build: kino_webapp
  ports:
    - "4002:4002"
    - "4003:4003"
  links:
    - postgres:postgres.local
    - rabbitmq:rabbitmq.local
  environment:
    - POSTGRES_HOST=postgres.local
  volumes:
    - ./kino_webapp:/app
